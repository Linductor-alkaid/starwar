# 部署前检查清单

在开始部署前，请确保完成以下准备工作：

## ✅ 本地准备

### 前端构建
- [x] 已完成 `npm run build`（您已完成）
- [ ] 检查 `frontend/dist/` 目录是否存在且包含以下文件：
  - `index.html`
  - `static/` 目录（包含css、js、fonts等）
- [ ] 确认前端构建无错误

### 后端打包
- [ ] 打包后端JAR文件（如果还没有）

**打包命令:**
```powershell
cd backend
mvn clean package -DskipTests
```

打包成功后，JAR文件应该在：`backend/target/star-war-backend-1.0.0.jar`

- [ ] 确认JAR文件存在且大小合理（通常几十MB）

### 配置文件准备
- [ ] 准备好数据库初始化脚本：`docs/database/init.sql`
- [ ] 准备好后端配置文件（生产环境需要修改）：
  - 数据库连接地址
  - 数据库用户名和密码
  - 服务器端口（如果需要更改）

---

## 📦 需要上传到服务器的文件

### 必需文件

1. **前端构建产物**
   - 整个 `frontend/dist/` 目录的内容
   - 目标路径：`/var/www/starwar/`

2. **后端JAR包**
   - `backend/target/star-war-backend-1.0.0.jar`
   - 目标路径：`/opt/starwar/`

3. **数据库初始化脚本**（如果服务器上还没有数据库）
   - `docs/database/init.sql`
   - 用于在服务器上创建数据库和表结构

### 可选文件

- 后端配置文件模板（可以作为参考）

---

## 🖥️ 服务器环境检查

在开始部署前，确保服务器满足以下要求：

- [ ] **操作系统**: Linux（Ubuntu/CentOS等）
- [ ] **JDK 8+**: 已安装并可执行 `java -version`
- [ ] **MySQL**: 已安装且服务正在运行
- [ ] **Nginx**: 已安装（用于前端部署）
- [ ] **防火墙**: 已配置允许HTTP(80)和HTTPS(443)端口
- [ ] **磁盘空间**: 至少500MB可用空间

---

## 🔍 快速检查命令

在服务器上运行以下命令检查环境：

```bash
# 检查Java
java -version

# 检查MySQL
mysql --version
sudo systemctl status mysql

# 检查Nginx
nginx -v
sudo systemctl status nginx

# 检查磁盘空间
df -h

# 检查端口占用（8080端口应该未被占用）
sudo netstat -tlnp | grep 8080
```

---

## 📋 部署步骤概览

1. ✅ **本地准备** - 构建前端和打包后端（前端已完成）
2. ⏭️ **上传文件** - 将文件上传到服务器
3. ⏭️ **配置数据库** - 在服务器上创建数据库并导入数据
4. ⏭️ **部署后端** - 配置并启动后端服务
5. ⏭️ **部署前端** - 配置Nginx并部署前端静态文件
6. ⏭️ **测试验证** - 检查所有功能是否正常

---

## 🚀 下一步

完成检查清单后，请按照 `部署指南.md` 中的详细步骤进行部署。

如有任何问题，请查看部署指南中的"常见问题排查"部分。
