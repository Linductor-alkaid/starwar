# å¼€å‘å¾…åŠæ¸…å• - é˜¶æ®µ2ï¼šåŸºç¡€æ¡†æ¶æ­å»º

## ğŸ“‹ ä»»åŠ¡æ€»è§ˆ

æœ¬é˜¶æ®µåŒ…æ‹¬3ä¸ªä»»åŠ¡ï¼Œé¢„è®¡è€—æ—¶ï¼š2-3å¤©

---

## âœ… ä»»åŠ¡åˆ—è¡¨

### ä»»åŠ¡7ï¼šåˆ›å»ºå®ä½“ç±»ï¼ˆEntityï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸ”´ é«˜
- **é¢„è®¡æ—¶é—´**ï¼š4å°æ—¶
- **è´Ÿè´£äºº**ï¼šåç«¯å¼€å‘äººå‘˜
- **çŠ¶æ€**ï¼šâ³ å¾…å¼€å§‹

#### å…·ä½“æ­¥éª¤
1. [ ] åˆ›å»º `entity` åŒ…
2. [ ] åˆ›å»º `User.java` å®ä½“ç±»
3. [ ] åˆ›å»º `GameRecord.java` å®ä½“ç±»
4. [ ] åˆ›å»º `Post.java` å®ä½“ç±»
5. [ ] åˆ›å»º `Reply.java` å®ä½“ç±»

#### Userå®ä½“ç±»ç¤ºä¾‹
```java
package com.starwar.entity;

import lombok.Data;
import java.time.LocalDateTime;

@Data
public class User {
    private Long id;
    private String username;
    private String password;
    private String email;
    private String nickname;
    private String avatar;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
}
```

#### GameRecordå®ä½“ç±»
```java
package com.starwar.entity;

import lombok.Data;
import java.time.LocalDateTime;

@Data
public class GameRecord {
    private Long id;
    private Long userId;
    private Integer score;
    private Integer level;
    private Integer playTime;
    private LocalDateTime recordDate;
}
```

#### éªŒæ”¶æ ‡å‡†
- âœ… 4ä¸ªå®ä½“ç±»åˆ›å»ºå®Œæˆ
- âœ… å­—æ®µç±»å‹ä¸æ•°æ®åº“ä¸€è‡´
- âœ… ä½¿ç”¨Lombokçš„@Dataæ³¨è§£
- âœ… å‘½åè§„èŒƒç¬¦åˆè¦æ±‚

---

### ä»»åŠ¡8ï¼šåˆ›å»ºç»Ÿä¸€è¿”å›ç»“æœç±»ï¼ˆResultï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­
- **é¢„è®¡æ—¶é—´**ï¼š2å°æ—¶
- **è´Ÿè´£äºº**ï¼šåç«¯å¼€å‘äººå‘˜
- **çŠ¶æ€**ï¼šâ³ å¾…å¼€å§‹

#### å…·ä½“æ­¥éª¤
1. [ ] åˆ›å»º `common` åŒ…
2. [ ] åˆ›å»º `Result.java` ç»Ÿä¸€è¿”å›ç»“æœç±»
3. [ ] åˆ›å»º `ResultCode.java` è¿”å›ç æšä¸¾
4. [ ] åˆ›å»º `PageResult.java` åˆ†é¡µç»“æœç±»

#### Resultç±»ç¤ºä¾‹
```java
package com.starwar.common;

import lombok.Data;

@Data
public class Result<T> {
    private Integer code;
    private String message;
    private T data;

    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("success");
        result.setData(data);
        return result;
    }

    public static <T> Result<T> error(Integer code, String message) {
        Result<T> result = new Result<>();
        result.setCode(code);
        result.setMessage(message);
        return result;
    }
}
```

#### ResultCodeæšä¸¾
```java
package com.starwar.common;

public enum ResultCode {
    SUCCESS(200, "success"),
    ERROR(500, "ç³»ç»Ÿé”™è¯¯"),
    PARAM_ERROR(400, "å‚æ•°é”™è¯¯"),
    UNAUTHORIZED(401, "æœªæˆæƒ"),
    FORBIDDEN(403, "ç¦æ­¢è®¿é—®"),
    NOT_FOUND(404, "èµ„æºä¸å­˜åœ¨");

    private final Integer code;
    private final String message;

    ResultCode(Integer code, String message) {
        this.code = code;
        this.message = message;
    }

    public Integer getCode() { return code; }
    public String getMessage() { return message; }
}
```

#### éªŒæ”¶æ ‡å‡†
- âœ… ç»Ÿä¸€è¿”å›ç»“æœç±»åˆ›å»ºå®Œæˆ
- âœ… æ”¯æŒæ³›å‹
- âœ… æä¾›ä¾¿æ·çš„é™æ€æ–¹æ³•
- âœ… è¿”å›ç æšä¸¾å®šä¹‰æ¸…æ™°

---

### ä»»åŠ¡9ï¼šåˆ›å»ºå·¥å…·ç±»
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­
- **é¢„è®¡æ—¶é—´**ï¼š4å°æ—¶
- **è´Ÿè´£äºº**ï¼šåç«¯å¼€å‘äººå‘˜
- **çŠ¶æ€**ï¼šâ³ å¾…å¼€å§‹

#### å…·ä½“æ­¥éª¤
1. [ ] åˆ›å»º `util` åŒ…
2. [ ] åˆ›å»º `JwtUtil.java` - JWTå·¥å…·ç±»
3. [ ] åˆ›å»º `PasswordUtil.java` - å¯†ç åŠ å¯†å·¥å…·ç±»

#### JwtUtilå·¥å…·ç±»
```java
package com.starwar.util;

import io.jsonwebtoken.Claims;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

public class JwtUtil {
    private static final String SECRET = "your-secret-key";
    private static final long EXPIRE_TIME = 7 * 24 * 60 * 60 * 1000; // 7å¤©

    public static String generateToken(Long userId, String username) {
        Map<String, Object> claims = new HashMap<>();
        claims.put("userId", userId);
        claims.put("username", username);
        
        return Jwts.builder()
                .setClaims(claims)
                .setExpiration(new Date(System.currentTimeMillis() + EXPIRE_TIME))
                .signWith(SignatureAlgorithm.HS256, SECRET)
                .compact();
    }

    public static Claims parseToken(String token) {
        return Jwts.parser()
                .setSigningKey(SECRET)
                .parseClaimsJws(token)
                .getBody();
    }
}
```

#### PasswordUtilå·¥å…·ç±»
```java
package com.starwar.util;

import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

public class PasswordUtil {
    private static final BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();

    public static String encode(String rawPassword) {
        return encoder.encode(rawPassword);
    }

    public static boolean matches(String rawPassword, String encodedPassword) {
        return encoder.matches(rawPassword, encodedPassword);
    }
}
```

#### éªŒæ”¶æ ‡å‡†
- âœ… JWTå·¥å…·ç±»èƒ½å¤Ÿç”Ÿæˆå’Œè§£æToken
- âœ… å¯†ç åŠ å¯†å·¥å…·ç±»èƒ½å¤ŸåŠ å¯†å’ŒéªŒè¯å¯†ç 
- âœ… å·¥å…·ç±»æ–¹æ³•æ­£ç¡®å®ç°
- âœ… å¼‚å¸¸å¤„ç†å®Œå–„

---

## ğŸ“Š é˜¶æ®µè¿›åº¦ç»Ÿè®¡

- **å·²å®Œæˆä»»åŠ¡**ï¼š0 / 3
- **è¿›è¡Œä¸­ä»»åŠ¡**ï¼š0 / 3
- **å¾…å¼€å§‹ä»»åŠ¡**ï¼š3 / 3
- **æ•´ä½“è¿›åº¦**ï¼š0%

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä»£ç è§„èŒƒ**ï¼šéµå¾ªJavaå‘½åè§„èŒƒï¼Œä½¿ç”¨é©¼å³°å‘½å
2. **ä¾èµ–ç®¡ç†**ï¼šJWTå’ŒBCryptéœ€è¦æ·»åŠ ç›¸åº”ä¾èµ–åˆ°pom.xml
3. **å®‰å…¨æ€§**ï¼šJWTå¯†é’¥è¦ä¿å¯†ï¼Œå¯†ç ç»ä¸æ˜æ–‡å­˜å‚¨
4. **ä»£ç å¤ç”¨**ï¼šå…¬å…±æ–¹æ³•æŠ½å–åˆ°å·¥å…·ç±»ä¸­

---

## ğŸ¯ å®Œæˆæ ‡å¿—

å½“ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶æ»¡è¶³æ—¶ï¼Œé˜¶æ®µ2å®Œæˆï¼š
- âœ… æ‰€æœ‰å®ä½“ç±»åˆ›å»ºå®Œæˆ
- âœ… ç»Ÿä¸€è¿”å›ç»“æœç±»å¯æ­£å¸¸ä½¿ç”¨
- âœ… JWTå’Œå¯†ç å·¥å…·ç±»åŠŸèƒ½æ­£å¸¸
- âœ… ä»£ç ç¼–è¯‘æ— é”™è¯¯

---

**ä¸Šä¸€é˜¶æ®µ**ï¼š[é˜¶æ®µ1ï¼šç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆå§‹åŒ–](å¼€å‘å¾…åŠæ¸…å•-é˜¶æ®µ1-ç¯å¢ƒæ­å»º.md)  
**ä¸‹ä¸€é˜¶æ®µ**ï¼š[é˜¶æ®µ3ï¼šç”¨æˆ·æ¨¡å—å¼€å‘](å¼€å‘å¾…åŠæ¸…å•-é˜¶æ®µ3-ç”¨æˆ·æ¨¡å—å¼€å‘.md)

