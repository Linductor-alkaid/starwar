# 开始使用指南

## 🎉 恭喜！项目开发完成

您的星际防卫战项目已完成前后端开发，现在可以开始测试和使用了！

## 📋 准备工作清单

在开始使用前，请确认以下内容：

### ✅ 环境检查
- [ ] JDK 8 已安装（命令行输入 `java -version` 验证）
- [ ] MySQL 8.0 已安装并启动
- [ ] IntelliJ IDEA 已安装（推荐）

### ✅ 文件检查
- [ ] 确认 `backend` 目录存在
- [ ] 确认 `docs/database/init.sql` 文件存在
- [ ] 确认 MySQL 可以正常连接

## 🚀 快速开始（3个步骤）

### 步骤1：初始化数据库 ⏱️ 5分钟

1. **打开MySQL Workbench**（或其他MySQL客户端）

2. **连接到MySQL服务器**
   - 用户名: root
   - 密码: 你的MySQL密码

3. **执行数据库脚本**
   - 打开文件: `docs/database/init.sql`
   - 执行整个脚本
   - 验证看到"数据库初始化完成！"提示

4. **验证数据库**
   ```sql
   USE star_war_db;
   SHOW TABLES;
   ```
   应该看到4张表：user, game_record, post, reply

### 步骤2：配置并运行后端 ⏱️ 10分钟

#### 方式1：使用启动脚本（最简单）⭐

1. **配置数据库连接**（如果还没配置）
   - 用记事本打开: `backend/src/main/resources/application.yml`
   - 修改第8行密码

2. **启动项目**
   - 双击 `backend/start.bat` 文件
   - 等待启动完成

3. **测试API**
   - 访问: http://localhost:8080/swagger-ui.html

#### 方式2：使用终端命令 ⭐

1. **打开PowerShell或CMD**
   ```
   cd G:\myproject\starwar\backend
   ```

2. **配置数据库连接**（如果还没配置）
   ```
   notepad src\main\resources\application.yml
   ```
   修改密码后保存

3. **首次运行下载依赖**（只需要一次）
   ```
   mvn clean install
   ```

4. **启动项目**
   ```
   mvn spring-boot:run
   ```

5. **测试API**
   - 访问: http://localhost:8080/swagger-ui.html

#### 方式3：使用IntelliJ IDEA

1. **打开IntelliJ IDEA**

2. **导入项目**
   - 选择 "File" -> "Open"
   - 选择 `backend` 目录
   - 等待Maven依赖下载

3. **运行项目**
   - 找到: `src/main/java/com/starwar/StarWarApplication.java`
   - 右键 -> "Run 'StarWarApplication'"

4. **测试API**
   - 访问: http://localhost:8080/swagger-ui.html

**详细说明**: 查看 `backend/终端启动指南.md`

### 步骤3：运行前端（可选）⏱️ 5分钟

如果已经完成前端开发，可以：

1. **打开命令行**
   ```bash
   cd frontend
   ```

2. **安装依赖**（如果还没安装）
   ```bash
   npm install
   ```

3. **启动前端**
   ```bash
   npm run serve
   ```

4. **访问前端**
   - 打开: http://localhost:8081

## 🧪 测试接口

### 使用Swagger测试（推荐）

1. 访问 http://localhost:8080/swagger-ui.html
2. 展开各个接口
3. 点击 "Try it out"
4. 输入参数
5. 点击 "Execute"

### 测试用户注册

在Swagger中找到 `/api/v1/auth/register`

```json
{
  "username": "myuser",
  "password": "123456",
  "email": "myuser@example.com",
  "nickname": "我的用户"
}
```

点击Execute，应该返回：
```json
{
  "code": 200,
  "message": "注册成功",
  "data": null
}
```

### 测试用户登录

在Swagger中找到 `/api/v1/auth/login`

```json
{
  "username": "myuser",
  "password": "123456"
}
```

点击Execute，应该返回token：
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**复制这个token，后续接口会用到！**

### 测试获取用户信息

1. 在Swagger中找到 `/api/v1/user/info`
2. 点击 "Authorize" 按钮
3. 输入 `Bearer {你的token}`（注意Bearer后面有空格）
4. 点击 "Authorize"
5. 点击 "Execute"

### 测试排行榜

在Swagger中找到 `/api/v1/game/leaderboard`，点击Execute即可（无需token）

## 🔧 常见问题

### 问题1: 编译错误

**错误**: Lombok相关错误

**解决**:
1. IDEA: File -> Settings -> Plugins -> 搜索Lombok -> Install
2. IDEA: File -> Settings -> Build -> Compiler -> Annotation Processors -> 勾选 "Enable annotation processing"
3. 重启IDEA

### 问题2: 数据库连接失败

**错误**: Cannot connect to database

**解决**:
1. 确认MySQL服务已启动
2. 确认密码正确
3. 确认端口是3306

### 问题3: 端口被占用

**错误**: Port 8080 is already in use

**解决**:
修改 `application.yml`:
```yaml
server:
  port: 8081  # 改成其他端口
```

### 问题4: Mapper找不到

**错误**: Mapper interface not found

**解决**:
1. 检查启动类是否有 `@MapperScan` 注解
2. 检查mapper.xml位置是否正确

## 📚 更多资源

### 文档索引
- `backend/快速开始.txt` - 后端快速指南
- `backend/开发指南.md` - 详细开发手册
- `backend/项目结构说明.md` - 项目结构详解
- `docs/后端开发说明文档.md` - 完整开发文档
- `docs/项目开发完成总结.md` - 项目总结

### API文档
- http://localhost:8080/swagger-ui.html

### 测试账号

数据库已预置测试用户：
- 用户名: testuser1
- 密码: 123456

## ✅ 验证清单

完成以下检查表示一切正常：

- [ ] 数据库初始化成功
- [ ] 后端项目成功启动
- [ ] Swagger可以访问
- [ ] 可以注册新用户
- [ ] 可以登录获取token
- [ ] 可以使用token调用接口
- [ ] 可以获取排行榜数据

## 🎯 下一步

项目运行成功后，您可以：

1. **完善功能**: 根据需求添加新功能
2. **优化性能**: 添加缓存、优化查询
3. **测试部署**: 打包部署到服务器
4. **监控维护**: 添加日志和监控

## 📞 获取帮助

遇到问题？
1. 查看本文档的"常见问题"
2. 查阅项目文档
3. 搜索Stack Overflow
4. 查看Spring Boot官方文档

---

祝您使用愉快！🚀

最后更新: 2024年

